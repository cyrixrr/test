name: Build and deploy Spring App

on: 
    push:
        branches:
            - main

            jobs:
                build-deploy:
                    name: Builad and Deploy Spring boot for beginner
                    runs-on: ubunty-latest
                    steps:
                        - name: Checkout code
                          uses: actions/checkout@v4

                        - name: JDK 17
                        - uses: actions/setup-java@v3
                          with:
                            distribution: 'corretto' # See 'Supported distributions' for available options
                            java-version: '17'

                        - name: Unit test
                          run: mvn -B test --file pom.xml

                        - name: Build the application
                          run: |
                            mvn clean
                            mvn -B package --file pom.xml